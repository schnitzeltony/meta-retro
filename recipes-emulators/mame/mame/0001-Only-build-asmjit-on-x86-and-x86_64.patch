From a8bd59055eda6b6656e56e689a8a74f7e835434d Mon Sep 17 00:00:00 2001
From: Julian Sikorski <belegdol+github@gmail.com>
Date: Sat, 27 Jun 2020 14:50:48 +0200
Subject: [PATCH] Only build asmjit on x86 and x86_64

---
 scripts/src/3rdparty.lua | 2 ++
 scripts/src/main.lua     | 4 ++++
 2 files changed, 6 insertions(+)

diff --git a/scripts/src/3rdparty.lua b/scripts/src/3rdparty.lua
index 52e5d862168..7002fdbe0ff 100644
--- a/scripts/src/3rdparty.lua
+++ b/scripts/src/3rdparty.lua
@@ -2224,6 +2224,7 @@ project "wdlfft"
 -- asmjit library
 --------------------------------------------------
 
+if not _OPTIONS["FORCE_DRC_C_BACKEND"] then
 project "asmjit"
 	uuid "4539757c-6e99-4bae-b3d0-b342a7c49539"
 	kind "StaticLib"
@@ -2353,3 +2354,4 @@ project "asmjit"
 		MAME_DIR .. "3rdparty/asmjit/src/asmjit/x86/x86rapass.cpp",
 		MAME_DIR .. "3rdparty/asmjit/src/asmjit/x86/x86rapass_p.h",
 	}
+end
diff --git a/scripts/src/main.lua b/scripts/src/main.lua
index 26e7ab94394..4d787bfbdaf 100644
--- a/scripts/src/main.lua
+++ b/scripts/src/main.lua
@@ -261,8 +261,12 @@ end
 		"wdlfft",
 		ext_lib("jpeg"),
 		"7z",
+	}
+if not _OPTIONS["FORCE_DRC_C_BACKEND"] then
+	links {
 		"asmjit",
 	}
+end
 if (STANDALONE~=true) then
 	links {
 		ext_lib("lua"),
-- 
2.21.3

