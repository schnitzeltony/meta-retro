From 0ba9c56e7a27bd926270678e7add074fb00204f8 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@gmail.com>
Date: Sun, 3 Mar 2019 15:00:41 +0100
Subject: [PATCH] pokey: Make step_one_clock inline
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This gives another small performance win on machines using multiple pokeys. Since
it ruins our valgind output and upstream will not be keen on:

Upstream-Status: Pending

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 src/devices/sound/pokey.cpp | 2 +-
 src/devices/sound/pokey.h   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/devices/sound/pokey.cpp b/src/devices/sound/pokey.cpp
index 03ea12c7b5..80b9f64d6a 100644
--- a/src/devices/sound/pokey.cpp
+++ b/src/devices/sound/pokey.cpp
@@ -564,7 +564,7 @@ void pokey_device::step_pot()
  *
  */
 
-void pokey_device::step_one_clock(void)
+inline void pokey_device::step_one_clock(void)
 {
 	int const base_clock = (m_AUDCTL & CLK_15KHZ) ? CLK_114 : CLK_28;
 
diff --git a/src/devices/sound/pokey.h b/src/devices/sound/pokey.h
index 7e63e89e54..48858bc743 100644
--- a/src/devices/sound/pokey.h
+++ b/src/devices/sound/pokey.h
@@ -264,7 +264,7 @@ private:
 
 	static constexpr int POKEY_CHANNELS = 4;
 
-	void step_one_clock();
+	inline void step_one_clock();
 	void step_keyboard();
 	void step_pot();
 
-- 
2.20.1

