From 168f7f181099e6fbbb4ba7100e45f224afec6107 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Sat, 26 Dec 2015 21:29:16 +0100
Subject: [PATCH] use pkg-config for finding sdl library settings
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 scripts/src/osd/sdl.lua     | 6 +++---
 scripts/src/osd/sdl_cfg.lua | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/scripts/src/osd/sdl.lua b/scripts/src/osd/sdl.lua
index d1a8322..32ca84a 100644
--- a/scripts/src/osd/sdl.lua
+++ b/scripts/src/osd/sdl.lua
@@ -78,7 +78,7 @@ function maintargetosdoptions(_target,_subtarget)
 					}
 				configuration { }
 			else
-				local str = backtick(sdlconfigcmd() .. " --libs | sed 's/ -lSDLmain//'")
+				local str = backtick("pkg-config --libs sdl2 | sed 's/-lSDLmain//'")
 				addlibfromstring(str)
 				addoptionsfromstring(str)
 			end
@@ -280,7 +280,7 @@ if BASE_TARGETOS=="unix" then
 					"SDL2.framework",
 				}
 			else
-				local str = backtick(sdlconfigcmd() .. " --libs --static | sed 's/-lSDLmain//'")
+				local str = backtick("pkg-config --libs --static sdl2 | sed 's/-lSDLmain//'")
 				addlibfromstring(str)
 				addoptionsfromstring(str)
 			end
@@ -300,7 +300,7 @@ if BASE_TARGETOS=="unix" then
 				"SDL2",
 			}
 		else
-			local str = backtick(sdlconfigcmd() .. " --libs")
+			local str = backtick("pkg-config --libs sdl2")
 			addlibfromstring(str)
 			addoptionsfromstring(str)
 		end
diff --git a/scripts/src/osd/sdl_cfg.lua b/scripts/src/osd/sdl_cfg.lua
index 0fd15e5..839a468 100644
--- a/scripts/src/osd/sdl_cfg.lua
+++ b/scripts/src/osd/sdl_cfg.lua
@@ -84,13 +84,13 @@ if BASE_TARGETOS=="unix" then
 					"MACOSX_USE_LIBSDL",
 				}
 				buildoptions {
-					backtick(sdlconfigcmd() .. " --cflags | sed 's:/SDL::'"),
+					backtick("pkg-config --cflags sdl2 | sed 's:/SDL::'"),
 				}
 			end
 			end
 	else
 		buildoptions {
-			backtick(sdlconfigcmd() .. " --cflags"),
+			backtick("pkg-config --cflags sdl2"),
 		}
 		if _OPTIONS["targetos"]~="asmjs" then
 			buildoptions {
-- 
2.5.5

